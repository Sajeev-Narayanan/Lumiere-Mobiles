<% layout('./layout/boilerplate') %>

<section class="banner-area organic-breadcrumb">
    <div class="container">
        <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
            <div class="col-first">
                <h1>Shop Category page</h1>
                <nav class="d-flex align-items-center">
                    <a href="/">Home<span class="lnr lnr-arrow-right"></span></a>
                    <a href="/mobile">Mobiles</a>
                    
                </nav>
            </div>
        </div>
    </div>
</section>
<!-- End Banner Area -->
<div class="container">
    <div class="row">
        <div class="col-xl-3 col-lg-4 col-md-5">
            <div class="sidebar-categories">
                <div class="head">Browse Categories</div>
                <ul class="main-categories">
                    <% for(cata of category) { %> 
                    <li class="main-nav-list"><a data-toggle="collapse" href="#fruitsVegetable" aria-expanded="false" aria-controls="fruitsVegetable"><span
                             class="lnr lnr-arrow-right"></span><%= cata.category %> </a>
                        
                    </li>

                    <% } %> 
                    
                </ul>
            </div>
            <div class="sidebar-filter mt-50">
                <div class="top-filter-head">Product Filters</div>
                <div class="common-filter">
                    <div class="head">Brands</div>
                    <form action="#">
                        <ul>
                            <% for(brands of brand ){ %> 
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="apple" name="brand"><label for="apple"><%= brands.brand %> </label></li>
                            <% } %> 
                     
                        </ul>
                    </form>
                </div>
                <div class="common-filter">
                    <div class="head">RAM</div>
                    <form action="#">
                        <ul>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="black" name="color"><label for="1gb">1 GB</label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="balckleather" name="color"><label for="2gb">2 GB</label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="blackred" name="color"><label for="4gb">4 GB</label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="gold" name="color"><label for="6gb">6 GB</label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="spacegrey" name="color"><label for="8gb">8 GB</label></li>
                        </ul>
                    </form>
                </div>
                <div class="common-filter">
                    <div class="head">Internal Storage</div>
                    <form action="#">
                        <ul>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="black" name="color"><label for="16gb">16 GB</label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="balckleather" name="color"><label for="32gb">32 GB</label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="blackred" name="color"><label for="64gb">64 GB</label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="gold" name="color"><label for="128gb">128 GB</label></li>
                            
                        </ul>
                    </form>
                </div>
                <div class="common-filter">
                    <div class="head">Discount</div>
                    <form action="#">
                        <ul>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="black" name="color"><label for="10">above 10%</label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="balckleather" name="color"><label for="20">above 20%</label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="blackred" name="color"><label for="30">above 30%</label></li>
                            <li class="filter-list"><input class="pixel-radio" type="radio" id="gold" name="color"><label for="40">above 40%</label></li>
                            
                        </ul>
                    </form>
                </div>
                <div class="common-filter">
                    <div class="head">Price</div>
                    <div class="price-range-area">
                        <div id="price-range"></div>
                        <div class="value-wrapper d-flex">
                            <div class="price">Price:</div>
                            <span>$</span>
                            <div id="lower-value"></div>
                            <div class="to">to</div>
                            <span>$</span>
                            <div id="upper-value"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-9 col-lg-8 col-md-7">
            <!-- Start Filter Bar -->
            <div class="filter-bar d-flex flex-wrap align-items-center">
                <div class="sorting">
                    <select>
                        <option value="1">Price -- Low to High</option>
                        <option value="1">Price -- High to Low</option>
                        <option value="1">Newest First</option>
                    </select>
                </div>
               
            </div>
            <!-- End Filter Bar -->
            <!-- Start Best Seller -->
            <section class="lattest-product-area pb-40 category-list">
                <div class="row">
                    <!-- single product -->
                    <% for( products of product){ %> 
                    <div class="col-lg-4 col-md-6">
                        <div class="single-product">
                            
                         <a href="/product?id=<%= products._id %>">
                            <div style="background-image: url(<%=products.image[0].url%>);width: 240px;height: 330px;
                            background-size: contain;background-repeat: no-repeat;"></div>
                        </a>

                            <div class="product-details mt-3">
                                <h6><%= products.product_name %> </h6>
                                <div class="price">
                                    <h6>₹ <%= products.finalPrice %> </h6>
                                    <h6 class="l-through">₹ <%= products.price %> </h6>
                                </div>
                                <div class="prd-bottom">

                                    <a class="social-info" onclick="cart('<%= products._id %>')">
                                        <span class="ti-bag"></span>
                                        <p class="hover-text">add to bag</p>
                                    </a>
                                    <a class="social-info" onclick="wishlist('<%= products._id %>')">
                                        <span class="lnr lnr-heart"></span>
                                        <p class="hover-text">Wishlist</p>
                                    </a>
                               
                                    <a href="/product?id=<%= products._id %>" class="social-info">
                                        <span class="lnr lnr-move"></span>
                                        <p class="hover-text">view more</p>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <% } %> 
                    <!-- single product -->
                    
                </div>
            </section>
            <!-- End Best Seller -->
            <!-- Start Filter Bar -->
           
            <!-- End Filter Bar -->
        </div>
    </div>
</div>


<!-- Start related-product Area -->

<!-- End related-product Area -->
<script>
    function wishlist(productId){
        fetch("/wishlistPost",{
            method:"post",
            headers:{ 'Content-Type': 'application/json'},
            body: JSON.stringify({ productId })
        }).then(res =>res.json()).then(data=>{
            
            if(data.login == false){
               
                window.location = "/login";
            }
        })
    }
</script>

<script>
    function cart(productId){
       
        fetch("/cartAdd",{
            method:"post",
            headers:{ 'Content-Type': 'application/json'},
            body: JSON.stringify({ productId})
        }).then(res =>res.json()).then(data=>{
            
            if(data.login == false && data.stock.stock == 0 ){
               
                swal("Out Of Stock!");
            }else if(data.login == false){
                window.location = "/login";
            }
        })
    }
</script>
